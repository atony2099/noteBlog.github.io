<!doctype html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="æ‰˜å°¼çš„å¼€å‘ç¬”è®°">
<meta property="og:url" content="atony2099.github.io/page/4/index.html">
<meta property="og:site_name" content="æ‰˜å°¼çš„å¼€å‘ç¬”è®°">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="æ‰˜å°¼çš„å¼€å‘ç¬”è®°">
<meta name="twitter:description">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="atony2099.github.io/page/4/"/>





  <title> æ‰˜å°¼çš„å¼€å‘ç¬”è®° </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">æ‰˜å°¼çš„å¼€å‘ç¬”è®°</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
    
      <p class="site-subtitle"></p>
    
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            å½’æ¡£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            æ ‡ç­¾
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="atony2099.github.io/2016/06/19/1HTTP/https/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="tony2009">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="æ‰˜å°¼çš„å¼€å‘ç¬”è®°">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="æ‰˜å°¼çš„å¼€å‘ç¬”è®°" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/06/19/1HTTP/https/" itemprop="url">
                  https
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-06-19T20:14:18+08:00">
                2016-06
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="åŸºç¡€æ¦‚å¿µçš„ç†è§£"><a href="#åŸºç¡€æ¦‚å¿µçš„ç†è§£" class="headerlink" title="åŸºç¡€æ¦‚å¿µçš„ç†è§£:"></a>åŸºç¡€æ¦‚å¿µçš„ç†è§£:</h4><ol>
<li><p>å¯†é’¥ï¼š æ”¹å˜å¯†ç (åŠ å¯†ç®—æ³•)ç»“æœçš„å‚æ•°</p>
<p>for: </p>
<blockquote>
<p>å‡¯æ’’å¯†ç : æ¯ä¸ªå­—ç¬¦éƒ½ç”±å­—æ¯è¡¨ä¸­ä¸‰ä¸ªä½ç½®åå­—ç¬¦ä»£æ›¿</p>
</blockquote>
<p>åŠ å¯†ç®—æ³•ï¼šE :d = x&gt;&gt;2 </p>
<p>å‡è®¾è¾“å…¥æ˜¯abï¼Œ åˆ™è¾“å‡º de</p>
<p>è§£å¯†ç®—æ³•ï¼šx = d&lt;&lt;2</p>
<p>æ­¤æ—¶å‡½æ•°Eå°±æ˜¯åŠ å¯†ç®—æ³•ï¼Œå‚æ•°3å°±æ˜¯å¯†é’¥ï¼Œå¦‚æœæ›´æ”¹å¯†é’¥çš„å€¼ä¸º1ï¼Œåˆ™è¾“å‡ºç»“æœæ˜¯bc.</p>
<p><strong>ä¸€èˆ¬åŠ å¯†ç®—æ³•æ˜¯å…¬å¼€çš„ï¼Œå¯†é’¥æ˜¯ä¿å¯†çš„</strong></p>
</li>
<li><p>å¯¹ç§°åŠ å¯†ï¼šåŠ å¯†å’Œè§£å¯†ä½¿ç”¨åŒä¸€ä¸ªå¯†é’¥</p>
<p>éå¯¹ç§°åŠ å¯†ï¼šåŠ å¯†å’Œè§£å¯†ä¸ä½¿ç”¨åŒä¸€ä¸ªå¯†é’¥</p>
</li>
<li><p>ä»€ä¹ˆæ˜¯æ•°å­—ç­¾åéªŒè¯: ç”¨æ‘˜è¦ç®—æ³•(md5ï¼ŒSHA</p>
<p>ç­‰)å°†æºæ–‡ä»¶è½¬æ¢ä¸ºä¸€æ®µå¯†æ–‡Aã€‚,å®¢æˆ·ç«¯è·å–æºæ–‡ä»¶åç”¨åŒæ ·ç®—æ³•è½¬æ¢æˆå¯†æ–‡B, A=Båˆ™è¯æ˜å¯†æ–‡ç­æœ‰è¢«ç¯¡æ”¹ã€‚</p>
<p>è¯¦æƒ…å¦‚ä¸‹: </p>
<p>1.</p>
<p><img src="http://image.beekka.com/blog/201108/bg2011080901.png" alt="img"></p>
<p>é²å‹ƒæœ‰ä¸¤æŠŠé’¥åŒ™ï¼Œä¸€æŠŠæ˜¯å…¬é’¥ï¼Œå¦ä¸€æŠŠæ˜¯ç§é’¥ã€‚</p>
<p>2.</p>
<p><img src="http://image.beekka.com/blog/201108/bg2011080902.png" alt="img"></p>
<p>é²å‹ƒæŠŠå…¬é’¥é€ç»™ä»–çš„æœ‹å‹ä»¬â€”-å¸•è’‚ã€é“æ ¼ã€è‹çŠâ€”-æ¯äººä¸€æŠŠã€‚</p>
<p>3.</p>
<p><img src="http://image.beekka.com/blog/201108/bg2011080903.png" alt="img"></p>
<p>è‹çŠè¦ç»™é²å‹ƒå†™ä¸€å°ä¿å¯†çš„ä¿¡ã€‚å¥¹å†™å®Œåç”¨é²å‹ƒçš„å…¬é’¥åŠ å¯†ï¼Œå°±å¯ä»¥è¾¾åˆ°ä¿å¯†çš„æ•ˆæœã€‚</p>
<p>4.</p>
<p><img src="http://image.beekka.com/blog/201108/bg2011080904.png" alt="img"></p>
<p>é²å‹ƒæ”¶ä¿¡åï¼Œç”¨ç§é’¥è§£å¯†ï¼Œå°±çœ‹åˆ°äº†ä¿¡ä»¶å†…å®¹ã€‚è¿™é‡Œè¦å¼ºè°ƒçš„æ˜¯ï¼Œåªè¦é²å‹ƒçš„ç§é’¥ä¸æ³„éœ²ï¼Œè¿™å°ä¿¡å°±æ˜¯å®‰å…¨çš„ï¼Œå³ä½¿è½åœ¨åˆ«äººæ‰‹é‡Œï¼Œä¹Ÿæ— æ³•è§£å¯†ã€‚</p>
<p>5.</p>
<p><img src="http://image.beekka.com/blog/201108/bg2011080905.png" alt="img"></p>
<p>é²å‹ƒç»™è‹çŠå›ä¿¡ï¼Œå†³å®šé‡‡ç”¨â€æ•°å­—ç­¾åâ€ã€‚ä»–å†™å®Œåå…ˆç”¨Hashå‡½æ•°ï¼Œç”Ÿæˆä¿¡ä»¶çš„æ‘˜è¦ï¼ˆdigestï¼‰ã€‚</p>
<p>6.</p>
<p><img src="http://image.beekka.com/blog/201108/bg2011080906.png" alt="img"></p>
<p>ç„¶åï¼Œé²å‹ƒä½¿ç”¨ç§é’¥ï¼Œå¯¹è¿™ä¸ªæ‘˜è¦åŠ å¯†ï¼Œç”Ÿæˆâ€æ•°å­—ç­¾åâ€ï¼ˆsignatureï¼‰ã€‚</p>
<p>7.</p>
<p><img src="http://image.beekka.com/blog/201108/bg2011080907.png" alt="img"></p>
<p>é²å‹ƒå°†è¿™ä¸ªç­¾åï¼Œé™„åœ¨ä¿¡ä»¶ä¸‹é¢ï¼Œä¸€èµ·å‘ç»™è‹çŠã€‚</p>
<p>8.</p>
<p><img src="http://image.beekka.com/blog/201108/bg2011080908.png" alt="img"></p>
<p>è‹çŠæ”¶ä¿¡åï¼Œå–ä¸‹æ•°å­—ç­¾åï¼Œç”¨é²å‹ƒçš„å…¬é’¥è§£å¯†ï¼Œå¾—åˆ°ä¿¡ä»¶çš„æ‘˜è¦ã€‚ç”±æ­¤è¯æ˜ï¼Œè¿™å°ä¿¡ç¡®å®æ˜¯é²å‹ƒå‘å‡ºçš„ã€‚</p>
<p>9.</p>
<p><img src="http://image.beekka.com/blog/201108/bg2011080909.png" alt="img"></p>
<p>è‹çŠå†å¯¹ä¿¡ä»¶æœ¬èº«ä½¿ç”¨Hashå‡½æ•°ï¼Œå°†å¾—åˆ°çš„ç»“æœï¼Œä¸ä¸Šä¸€æ­¥å¾—åˆ°çš„æ‘˜è¦è¿›è¡Œå¯¹æ¯”ã€‚å¦‚æœä¸¤è€…ä¸€è‡´ï¼Œå°±è¯æ˜è¿™å°ä¿¡æœªè¢«ä¿®æ”¹è¿‡ã€‚</p>
<p>â€‹</p>
<p>â€‹</p>
</li>
</ol>
<h4 id="https-åŠ å¯†è¿‡ç¨‹"><a href="#https-åŠ å¯†è¿‡ç¨‹" class="headerlink" title="https åŠ å¯†è¿‡ç¨‹"></a>https åŠ å¯†è¿‡ç¨‹</h4><p><img src="http://ohbzayk4i.bkt.clouddn.com/17-2-3/69996892-file_1486091654670_11590.png" alt=""></p>
<p><img src="http://image.beekka.com/blog/2014/bg2014092002.png" alt=""></p>
<blockquote>
<p>ç¬¬ä¸€æ­¥ï¼Œçˆ±ä¸½ä¸ç»™å‡ºåè®®ç‰ˆæœ¬å·ã€ä¸€ä¸ªå®¢æˆ·ç«¯ç”Ÿæˆçš„éšæœºæ•°ï¼ˆClient randomï¼‰ï¼Œä»¥åŠå®¢æˆ·ç«¯æ”¯æŒçš„åŠ å¯†æ–¹æ³•ã€‚</p>
<p>ç¬¬äºŒæ­¥ï¼Œé²å‹ƒç¡®è®¤åŒæ–¹ä½¿ç”¨çš„åŠ å¯†æ–¹æ³•ï¼Œå¹¶ç»™å‡ºæ•°å­—è¯ä¹¦ã€ä»¥åŠä¸€ä¸ªæœåŠ¡å™¨ç”Ÿæˆçš„éšæœºæ•°ï¼ˆServer randomï¼‰ã€‚</p>
<p>ç¬¬ä¸‰æ­¥ï¼Œçˆ±ä¸½ä¸ç¡®è®¤æ•°å­—è¯ä¹¦æœ‰æ•ˆï¼Œç„¶åç”Ÿæˆä¸€ä¸ªæ–°çš„éšæœºæ•°ï¼ˆPremaster secretï¼‰ï¼Œå¹¶ä½¿ç”¨æ•°å­—è¯ä¹¦ä¸­çš„å…¬é’¥ï¼ŒåŠ å¯†è¿™ä¸ªéšæœºæ•°ï¼Œå‘ç»™é²å‹ƒã€‚</p>
<p>ç¬¬å››æ­¥ï¼Œé²å‹ƒä½¿ç”¨è‡ªå·±çš„ç§é’¥ï¼Œè·å–çˆ±ä¸½ä¸å‘æ¥çš„éšæœºæ•°ï¼ˆå³Premaster secretï¼‰ã€‚</p>
<p>ç¬¬äº”æ­¥ï¼Œçˆ±ä¸½ä¸å’Œé²å‹ƒæ ¹æ®çº¦å®šçš„åŠ å¯†æ–¹æ³•ï¼Œä½¿ç”¨å‰é¢çš„ä¸‰ä¸ªéšæœºæ•°ï¼Œç”Ÿæˆâ€å¯¹è¯å¯†é’¥â€ï¼ˆsession keyï¼‰ï¼Œç”¨æ¥åŠ å¯†æ¥ä¸‹æ¥çš„æ•´ä¸ªå¯¹è¯è¿‡ç¨‹ã€‚</p>
</blockquote>
<ol>
<li><p>æ¡æ‰‹é˜¶æ®µ: ä½¿ç”¨éå¯¹ç§°åŠ å¯†ä¼ è¾“â€œå¯¹ç§°å¯†é’¥â€ã€‚</p>
</li>
<li><p>ä¼ è¾“é˜¶æ®µï¼šä½¿ç”¨å¯¹ç§°å¯†é’¥ä¼ è¾“æ•°æ®ã€‚</p>
<p>â€‹</p>
<p>â€‹</p>
</li>
</ol>
<p><strong>ä»€ä¹ˆæ˜¯è¯ä¹¦</strong>:  ç›¸å½“äºå…¬å¸å…¬ç« ï¼Œç”¨æ¥è¯æ˜ä¸œè¥¿æ˜¯å¯é çš„ï¼Œæ­¤å¤„æ˜¯è¯æ˜æœåŠ¡ç«¯è¿”å›çš„å…¬é’¥æ˜¯å€¼å¾—ä¿¡èµ–çš„è¯ä¹¦ã€‚</p>
<p><strong>CA</strong>: Certificate Authority,å®ƒæ˜¯è´Ÿè´£ç®¡ç†å’Œç­¾å‘è¯ä¹¦çš„ç¬¬ä¸‰æ–¹æœºæ„ï¼Œä¸€èˆ¬æ¥è¯´ï¼ŒCAå¿…é¡»æ˜¯æ‰€æœ‰è¡Œä¸šå’Œæ‰€æœ‰å…¬ä¼—éƒ½ä¿¡ä»»çš„ã€è®¤å¯çš„ã€‚å› æ­¤å®ƒå¿…é¡»å…·æœ‰è¶³å¤Ÿçš„æƒå¨æ€§ã€‚</p>
<p><strong>CAè¯ä¹¦</strong>:æœ‰CAç‰ˆæœ¬çš„è¯ä¹¦</p>
<p><img src="http://ohbzayk4i.bkt.clouddn.com/17-2-3/38246802-file_1486097177054_9b76.jpg" alt=""></p>
<p><a href="[æ•°å­—è¯ä¹¦åŠCAçš„æ‰«ç›²ä»‹ç»](http://kb.cnblogs.com/page/194742/">http://kb.cnblogs.com/page/194742/</a>)</p>
<p><a href="http://www.ruanyifeng.com/blog/2011/08/what_is_a_digital_signature.html" target="_blank" rel="external">æ•°å­—ç­¾åæ˜¯ä»€ä¹ˆ</a></p>
<p><a href="https://www.sdk.cn/news/2921" target="_blank" rel="external">è¯¦è§£httpsæ˜¯å¦‚ä½•ç¡®ä¿å®‰å…¨çš„ï¼Ÿ</a></p>
<p><a href="https://autolayout.club/2016/12/22/%E5%86%99%E7%BB%99-iOS-%E5%BC%80%E5%8F%91%E8%80%85%E7%9C%8B%E7%9A%84-HTTPS-%E6%8C%87%E5%8D%97/" target="_blank" rel="external">å†™ç»™ iOS å¼€å‘è€…çœ‹çš„ HTTPS æŒ‡å—</a></p>
<p><a href="http://www.jianshu.com/p/7158568e4867" target="_blank" rel="external">SSL/TLS æ¡æ‰‹è¿‡ç¨‹è¯¦è§£</a></p>
<p><a href="http://www.jianshu.com/p/ffe8c203a471" target="_blank" rel="external">äº’è”ç½‘å®‰å…¨ä¹‹æ•°å­—ç­¾åã€æ•°å­—è¯ä¹¦ä¸PKIç³»ç»Ÿ</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="atony2099.github.io/2016/05/25/1block/weak-block/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="tony2009">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="æ‰˜å°¼çš„å¼€å‘ç¬”è®°">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="æ‰˜å°¼çš„å¼€å‘ç¬”è®°" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/25/1block/weak-block/" itemprop="url">
                  weak strong dance
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-05-25T20:51:37+08:00">
                2016-05
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="weak"><a href="#weak" class="headerlink" title="__weak"></a>__weak</h4><p>åœ¨ARCç¯å¢ƒä¸‹çš„ï¼Œæ¯ä¸ªblockåœ¨åˆ›å»ºæ—¶ï¼Œç¼–è¯‘å™¨ä¼šå¯¹é‡Œé¢ç”¨åˆ°çš„æ‰€æœ‰å¯¹è±¡è‡ªåŠ¨å¢åŠ ä¸€ä¸ªreference count,å¦‚ä¸‹ Block ä¼š retain â€˜selfâ€™ï¼Œè€Œ â€˜selfâ€˜ åˆ retain äº† Blockã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">__weak typeof(self) weakSelf = self; </span><br><span class="line">    self.block = ^&#123;</span><br><span class="line">      	if(strongSelf) &#123;</span><br><span class="line">           [strongSelf description];</span><br><span class="line">      	&#125;</span><br><span class="line">    &#125;;</span><br></pre></td></tr></table></figure>
<p>weakSelfæ˜¯ä¸ºäº†blockä¸æŒæœ‰selfï¼Œé¿å…å¾ªç¯å¼•ç”¨ï¼Œè€Œå†å£°æ˜ä¸€ä¸ªstrongSelfæ˜¯å› ä¸ºä¸€æ—¦è¿›å…¥blockæ‰§è¡Œï¼Œå°±ä¸å…è®¸selfåœ¨è¿™ä¸ªæ‰§è¡Œè¿‡ç¨‹ä¸­é‡Šæ”¾ã€‚blockæ‰§è¡Œå®Œåè¿™ä¸ªstrongSelfä¼šè‡ªåŠ¨é‡Šæ”¾ï¼Œæ²¡æœ‰å¾ªç¯å¼•ç”¨é—®é¢˜ã€‚</p>
<h4 id="strong"><a href="#strong" class="headerlink" title="__strong"></a>__strong</h4><p>å•çº¯çš„åŠ weak è¿˜æ˜¯ç”±é—®é¢˜ï¼Œè¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœè¿™ä¸ªblockåœ¨å­çº¿ç¨‹æ‰§è¡Œï¼Œblockæ‰§è¡Œçš„æ˜¯ä¸€ä¸ªå¾ˆé•¿çš„ä»£ç ï¼Œåœ¨AèŠ‚ç‚¹selfè¿˜åœ¨ï¼Œåœ¨BèŠ‚ç‚¹ï¼Œselfè¢«é”€æ¯äº†ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">weak typeof__(self) weakSelf = self; //retainCount  = 1;</span><br><span class="line"></span><br><span class="line"> dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123;</span><br><span class="line"></span><br><span class="line">    [weakSelf doSomething]; // AèŠ‚ç‚¹selfè¿˜åœ¨,retainCount = 1;</span><br><span class="line">   [weakSelf doSomtThing];// BèŠ‚ç‚¹selfè¢«releaseï¼ŒretainCount = 0ï¼›æ‰§è¡Œæ‰§è¡Œçš„é€»è¾‘æ˜¯ä¸å®Œæ•´çš„</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>å¼•å…¥block:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">weak typeof__(self) weakSelf = self; //retainCount  = 1;</span><br><span class="line"></span><br><span class="line"> dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123;</span><br><span class="line">     __strong typeof(self) strongSelf = weakSelf; //æ­¤æ—¶retainCount = 2 </span><br><span class="line">    [weakSelf doSomething]; // AèŠ‚ç‚¹selfè¿˜åœ¨,retainCount = 2;</span><br><span class="line">   [weakSelf doSomtThing];// BèŠ‚ç‚¹selfè¢«releaseï¼ŒretainCount = 1ï¼›æ‰§è¡Œæ‰§è¡Œçš„é€»è¾‘æ˜¯ä¸å®Œæ•´çš„</span><br><span class="line">&#125;);</span><br><span class="line">weakSelfï¼›// weakSelfçš„ä½œç”¨åŸŸå¤§äºself,æ­¤æ—¶self çš„retainCount = 0;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>strog - weaké…åˆ èƒ½ä¿è¯blockä»£ç èƒ½ä¿è¯åœ¨ä»£ç æ‰§è¡Œè¿‡ç¨‹ä¸­æŒæœ‰selfï¼Œä¿è¯ä»£ç æ‰§è¡Œå®Œæ•´</p>
</blockquote>
<h4 id="æ›´è¿›ä¸€æ­¥çš„åˆ¤æ–­"><a href="#æ›´è¿›ä¸€æ­¥çš„åˆ¤æ–­" class="headerlink" title="æ›´è¿›ä¸€æ­¥çš„åˆ¤æ–­"></a>æ›´è¿›ä¸€æ­¥çš„åˆ¤æ–­</h4><p>å¦‚æœåœ¨blockè¢«è°ƒç”¨çš„æ—¶å€™selfå·²ç»æ˜¯nilçš„æƒ…å†µä¸‹å‘¢ï¼Ÿ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">self;// åˆå§‹self å‡è®¾å½“å‰çš„selfçš„retainCount = 1ï¼›</span><br><span class="line"> __weak typeof(self) weakSelf = self; //æ­¤æ—¶retainCount = 1;</span><br><span class="line">    self.block = ^&#123;</span><br><span class="line">       __strong typeof(self) strongSelf = weakSelf;</span><br><span class="line">        __strong typeof(self) strongSelf = weakSelf; //æ­¤æ—¶retainCount = ??</span><br><span class="line">      	if(strongSelf) &#123;</span><br><span class="line">           [strongSelf description];</span><br><span class="line">      	&#125;</span><br><span class="line">    &#125;;</span><br></pre></td></tr></table></figure>
<p>clangè½¬æ¢å</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">struct</span> __TestBlock__test_block_impl_0 &#123;</span><br><span class="line">  <span class="keyword">struct</span> __block_impl impl;</span><br><span class="line">  <span class="keyword">struct</span> __TestBlock__test_block_desc_0* Desc;</span><br><span class="line">  TestBlock *<span class="keyword">const</span> __weak weakSelf;  <span class="comment">//  weakæŒ‡é’ˆï¼Œå¹¶æ²¡æœ‰æ‹¥æœ‰self</span></span><br><span class="line">  __TestBlock__test_block_impl_0(<span class="keyword">void</span> *fp, <span class="keyword">struct</span> __TestBlock__test_block_desc_0 *desc, TestBlock *<span class="keyword">const</span> __weak _weakSelf, <span class="keyword">int</span> flags=<span class="number">0</span>) : weakSelf(_weakSelf) &#123;</span><br><span class="line">    impl.isa = &amp;_NSConcreteStackBlock;</span><br><span class="line">    impl.Flags = flags;</span><br><span class="line">    impl.FuncPtr = fp;</span><br><span class="line">    Desc = desc;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Blockçš„cè¯­è¨€å®ç°å‡½æ•°</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">void</span> __TestBlock__test_block_func_0(<span class="keyword">struct</span> __TestBlock__test_block_impl_0 *__cself) &#123;</span><br><span class="line"><span class="comment">// ---å‡è®¾blockå‡½æ•°å›è°ƒçš„æ—¶å€™ï¼Œselfå·²ç»è¢«é‡Šæ”¾;</span></span><br><span class="line">  <span class="comment">//  ç”±äºblock å¹¶æ²¡æœ‰æŒæœ‰selfï¼Œå½“å­çº¿ç¨‹çš„blockè¢«å»¶è¿Ÿå›è°ƒåï¼Œæ­¤æ—¶selfå€¼æ˜¯nil</span></span><br><span class="line">  	TestBlock *<span class="keyword">const</span> __weak weakSelf = __cself-&gt;weakSelf; <span class="comment">// bound by copy</span></span><br><span class="line">  	<span class="comment">//  å¯¹block å†retainå·²ç»å¤ªè¿Ÿäº†</span></span><br><span class="line">        __attribute__((objc_ownership(strong))) typeof(self) strongSelf = weakSelf;</span><br><span class="line">        ((id (*)(id, SEL))(<span class="keyword">void</span> *)objc_msgSend)((id)strongSelf, sel_registerName(<span class="string">"description"</span>));</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>ç»¼ä¸Šæ‰€ç¤ºï¼Œweak - strongæ²¡æœ‰çœŸæ­£å®ç°blockå¯¹å¯¹è±¡çš„æ‹¥æœ‰ï¼Œ<strong>æ ¹æœ¬åŸå› åœ¨äº blockå¯¹å¯¹è±¡çš„retain å‘ç”Ÿåœ¨ blockå‡½æ•°è¢«è°ƒç”¨åï¼Œè‹¥æ­¤æ—¶selfå·²ç»æ˜¯nilï¼Œblockä¹Ÿæ— èƒ½ä¸ºåŠ› </strong></p>
<p>æ›´è§„èŒƒçš„åšæ³•: </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">__weak typeof(self) weakSelf = self; //æ­¤æ—¶retainCount = 1;</span><br><span class="line">  self.block = ^&#123;</span><br><span class="line">      __strong typeof(self) strongSelf = weakSelf; </span><br><span class="line">    	if(strongSelf) &#123;</span><br><span class="line">         [strongSelf description]; </span><br><span class="line">    	&#125;</span><br><span class="line">  &#125;;</span><br></pre></td></tr></table></figure>
<h4 id="ReactiveCocoaçš„å®ç°"><a href="#ReactiveCocoaçš„å®ç°" class="headerlink" title="ReactiveCocoaçš„å®ç°"></a>ReactiveCocoaçš„å®ç°</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@weakify</span><br><span class="line">    self.block = ^&#123;</span><br><span class="line">        @strongify </span><br><span class="line">      	if(self) &#123;</span><br><span class="line">           [strongSelf description];</span><br><span class="line">      	&#125;</span><br><span class="line">    &#125;;</span><br></pre></td></tr></table></figure>
<p>@weakify @strongify æ˜¯ReactiveCocoaå®å®šä¹‰ï¼Œç®€åŒ–åç›¸å½“äº</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">__weak __typeof(self) self_weak_ = (self);</span><br><span class="line">    self.block = ^&#123;</span><br><span class="line">    __strong __typeof__(self) self = self_weak_;</span><br><span class="line">     if(self) &#123;</span><br><span class="line">   	 	[self description];</span><br><span class="line">     &#125;</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>
<p><a href="http://devliu.com/2016/04/14/%E7%A5%9E%E7%A7%98%E7%9A%84-weakify%E5%92%8C-strongify/" target="_blank" rel="external">ç¥ç§˜çš„ @weakify å’Œ @strongify</a></p>
<p><a href="https://gold.xitu.io/post/586e37f11b69e60063070d2c" target="_blank" rel="external">Weak-Strong-Dance çœŸçš„å®‰å…¨å—ï¼Ÿ</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="atony2099.github.io/2016/05/21/é—²èŠ/å¹¸å­˜è€…åå·®/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="tony2009">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="æ‰˜å°¼çš„å¼€å‘ç¬”è®°">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="æ‰˜å°¼çš„å¼€å‘ç¬”è®°" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/21/é—²èŠ/å¹¸å­˜è€…åå·®/" itemprop="url">
                  å¹¸å­˜è€…åå·®
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-05-21T14:18:27+08:00">
                2016-05
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="å¹¸å­˜è€…åå·®"><a href="#å¹¸å­˜è€…åå·®" class="headerlink" title="å¹¸å­˜è€…åå·®"></a>å¹¸å­˜è€…åå·®</h4><blockquote>
<p>å¹¸å­˜è€…åå·®ï¼Œ<strong>åªèƒ½çœ‹åˆ°æŸç§ç­›é€‰çš„ç»“æœè€Œæ²¡æœ‰æ„è¯†åˆ°ç­›é€‰çš„è¿‡ç¨‹ï¼Œä»è€Œå¿½ç•¥äº†è¢«ç­›é€‰æ‰çš„å…³é”®ä¿¡æ¯</strong></p>
<ol>
<li>ä¸€åè®°è€…æ¥åˆ°ç«è½¦ç«™å°ä¸Šï¼Œéšæœºè¯¢é—®ï¼šâ€œè¯·é—®ä½ ä¹°åˆ°ç«è½¦ç¥¨äº†å—ï¼Ÿâ€ </li>
</ol>
<p>ä¸€ä½å¤§å¦ˆå¾®å¾®ä¸€æ„£ï¼Œå›ç­”ï¼šâ€œä¹°åˆ°äº†â€ </p>
<p>è®°è€…åˆè½¬å‘ä¸€ä½ç²¾ç˜¦ç²¾ç˜¦çš„å¹´è½»äººï¼Œé—®ï¼šâ€œè¯·é—®ä½ ä¹°åˆ°ç«è½¦ç¥¨äº†å—ï¼Ÿâ€<br>å¹´è½»äººå›ç­”ï¼šâ€œä¹°åˆ°äº†â€ </p>
<p>éšåè®°è€…åˆé—®äº†5ä¸ªäººï¼Œå¤§å®¶éƒ½å›ç­”ï¼šâ€œä¹°åˆ°äº†â€ </p>
<p>æœ€åè®°è€…å¯¹ç€é•œå¤´è¯´ï¼šâ€œä»Šå¹´è™½ç„¶ç«è½¦ç¥¨éš¾ä¹°ï¼Œä½†æ˜¯é€šè¿‡é‡‡è®¿æˆ‘ä»¬å‘ç°ï¼Œå¤§å®¶éƒ½ä¹°åˆ°äº†ç«è½¦ç¥¨ï¼Œç°åœ¨æ­£æ»¡æ€€å¸Œæœ›åœ°èµ¶å›å®¶ä¹¡ï¼Œè¿‡ä¸ªå›¢åœ†å¹´ï¼</p>
<ol>
<li>åˆ›ä¸šã€‚æ–°é—»åª’ä½“åªä¼šæŠ¥é“æ´»ä¸‹æ¥çš„ä¼ä¸šï¼Œä½ ä¸€çœ‹å…¨ä¸–ç•Œéƒ½æ˜¯åˆ›ä¸šæˆåŠŸçš„ä¼ä¸šï¼Œäºæ˜¯è¢«å‘è¿›å»äº†.</li>
</ol>
</blockquote>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="atony2099.github.io/2016/05/11/1æ€§èƒ½ä¼˜åŒ–/ç¦»å±æ¸²æŸ“/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="tony2009">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="æ‰˜å°¼çš„å¼€å‘ç¬”è®°">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="æ‰˜å°¼çš„å¼€å‘ç¬”è®°" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/11/1æ€§èƒ½ä¼˜åŒ–/ç¦»å±æ¸²æŸ“/" itemprop="url">
                  ç¦»å±æ¸²æŸ“
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-05-11T23:38:06+08:00">
                2016-05
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="ä»€ä¹ˆæ˜¯ç¦»å±æ¸²æŸ“"><a href="#ä»€ä¹ˆæ˜¯ç¦»å±æ¸²æŸ“" class="headerlink" title="ä»€ä¹ˆæ˜¯ç¦»å±æ¸²æŸ“"></a>ä»€ä¹ˆæ˜¯ç¦»å±æ¸²æŸ“</h4><blockquote>
<p>off-Screen Rendering,åœ¨å½“å‰å±å¹•ç¼“å†²åŒºæ–°å¼€ä¸€ä¸ªç¼“å†²åŒºè¿›è¡Œæ“ä½œ</p>
</blockquote>
<p><img src="http://ohbzayk4i.bkt.clouddn.com/17-1-20/65044499-file_1484920235247_94fc.png" alt=""></p>
<p><img src="http://ohbzayk4i.bkt.clouddn.com/17-1-20/49773130-file_1484920235096_dcca.png" alt=""></p>
<p> æ­£å¸¸æƒ…å†µä¸‹ï¼ŒGPUåœ¨å½“å‰å±å¹•çš„ç¼“å†²åŒºè¿›è¡Œæ¸²æŸ“å°±å¯ä»¥äº†</p>
<p>å¯¹äºæ¯”è¾ƒå¤æ‚å›¾å½¢ï¼Œè¦å¼€è¾Ÿæ–°çš„ç¼“å†²åŒºï¼Œåˆ†é€šé“è¿›è¡Œæ¸²æŸ“ï¼Œæœ€åæ‰åˆå¹¶</p>
<p>å…·ä½“åŒ…æ‹¬ä»¥ä¸‹æƒ…å†µ</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="atony2099.github.io/2016/05/01/1reactivecocoa/reactive-cocoaå­¦ä¹ ç¬”è®°/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="tony2009">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="æ‰˜å°¼çš„å¼€å‘ç¬”è®°">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="æ‰˜å°¼çš„å¼€å‘ç¬”è®°" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/01/1reactivecocoa/reactive-cocoaå­¦ä¹ ç¬”è®°/" itemprop="url">
                  reactive cocoaå­¦ä¹ ç¬”è®°
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-05-01T08:00:00+08:00">
                2016-05
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="http://mrpeak.cn/blog/functional/" target="_blank" rel="external">iOSä¸å‡½æ•°å¼ç¼–ç¨‹</a></p>
<p><a href="https://gold.xitu.io/post/583907a961ff4b006cafce82" target="_blank" rel="external">ReactiveCocoa ä¸­ RACSignal æ‰€æœ‰å˜æ¢æ“ä½œåº•å±‚å®ç°åˆ†æ(ä¸Š)</a></p>
<p><a href="http://mcxiaoke.gitbooks.io/rxdocs/content/" target="_blank" rel="external">ReactiveX/RxJavaæ–‡æ¡£ä¸­æ–‡ç‰ˆ</a></p>
<p><a href="http://tech.meituan.com/RACSignalSubscription.html" target="_blank" rel="external">RACSignalçš„Subscriptionæ·±å…¥åˆ†æ</a></p>
<h4 id="åŸºç¡€æ¦‚å¿µ"><a href="#åŸºç¡€æ¦‚å¿µ" class="headerlink" title="åŸºç¡€æ¦‚å¿µ"></a>åŸºç¡€æ¦‚å¿µ</h4><h5 id="side-effects-å‰¯ä½œç”¨"><a href="#side-effects-å‰¯ä½œç”¨" class="headerlink" title="side effects(å‰¯ä½œç”¨)"></a>side effects(å‰¯ä½œç”¨)</h5><blockquote>
<p> In <a href="https://en.wikipedia.org/wiki/Computer_science" target="_blank" rel="external">computer science</a>, a <a href="https://en.wikipedia.org/wiki/Subroutine" target="_blank" rel="external">function</a> or <a href="https://en.wikipedia.org/wiki/Expression_(programming" target="_blank" rel="external">expression</a>) is said to have a <strong>side effect</strong> if it modifies some <a href="https://en.wikipedia.org/wiki/State_(computer_science" target="_blank" rel="external">state</a>) outside its scope or has an <em>observable</em> interaction with its calling functions or the outside world</p>
<p> For example, a particular function might modify a <a href="https://en.wikipedia.org/wiki/Global_variable" target="_blank" rel="external">global variable</a> or <a href="https://en.wikipedia.org/wiki/Static_variable" target="_blank" rel="external">static variable</a>, modify one of its arguments, raise an exception, write data to a display or file, read data, or call other side-effecting functions.</p>
<p> ç®€å•ç†è§£: ä¸€ä¸ªå‡½æ•°çš„å½±å“åº”æ§åˆ¶åœ¨å®ƒçš„ä½œç”¨åŸŸå†…ï¼Œå®ƒåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ä¸åº”è¯¥ä¾èµ–å¤–éƒ¨æˆ–è€…å¯¹å¤–éƒ¨äº§ç”Ÿå½±å“</p>
<p> å¸¸è§çš„å‰¯ä½œç”¨</p>
<ol>
<li>å½±å“äº†å¤–éƒ¨å˜é‡ï¼Œæ¯”å¦‚å…¨å±€å˜é‡</li>
<li>å‡½æ•°æ‰§è¡Œè¿‡ç¨‹ä¸­ä¾èµ–å¤–éƒ¨å˜é‡</li>
<li>å…¶ä»–å¤–éƒ¨å½±å“:å‡½æ•°æ‰§è¡Œä¸­ï¼Œlogå‡ºä¿¡æ¯ï¼Œå†™å…¥äº†æ–‡ä»¶ï¼Œè§¦å‘äº†ç½‘ç»œè¯·æ±‚ï¼Œæ›´æ–°äº†å±å¹•</li>
</ol>
</blockquote>
<h5 id="referential-transparency-å¼•ç”¨é€æ˜"><a href="#referential-transparency-å¼•ç”¨é€æ˜" class="headerlink" title="referential transparency(å¼•ç”¨é€æ˜)"></a>referential transparency(å¼•ç”¨é€æ˜)</h5><blockquote>
<p><a href="http://stackoverflow.com/questions/210835/what-is-referential-transparency" target="_blank" rel="external">What is referential transparency?</a></p>
<p>Referential transparency, a term commonly used in functional programming, means that given a function and an input value, you will always receive the same output. That is to say there is no external state used in the function.</p>
<p>Here is an example of a referential transparent function:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; int plusOne(int x)</span><br><span class="line">&gt; &#123;</span><br><span class="line">&gt;   return x+1;</span><br><span class="line">&gt; &#125;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>&gt;</p>
<blockquote>
<p>With a referential transparent function, given an input and a function, you could replace it with a value instead of calling the function. So instead of calling plusOne with a paremter of 5, we could just replace that with 6.</p>
<p>Another good example is mathematics in general. In mathematics given a function and an input value, it will always map to the same output value. f(x) = x + 1. Therefore functions in mathematics are referentially transparent.</p>
<ul>
<li><p>ç®€å•ç†è§£: å¼•ç”¨é€æ˜ï¼Œå‡½æ•°è¾“å…¥ç›¸åŒå‚æ•°æ€»æ˜¯å¾—åˆ°ç›¸åŒçš„ç»“æœ.</p>
<p>func(A) = 5, func(A)å¯ä»¥ç”¨5æ¥ä»£æ›¿</p>
</li>
</ul>
</blockquote>
<h5 id="pure-function"><a href="#pure-function" class="headerlink" title="pure function"></a>pure function</h5><blockquote>
<p> <strong>a pure function is referentially transparent and has no side effects</strong></p>
<p>çº¯å‡½æ•°æ˜¯å…·å¤‡å¼•ç”¨é€æ˜ å’Œæ²¡æœ‰å‰¯ä½œç”¨çš„å‡½æ•°</p>
</blockquote>
<h5 id="First-Class"><a href="#First-Class" class="headerlink" title="First Class"></a>First Class</h5><blockquote>
<p>å‡½æ•°: æ™®é€šå…¬æ°‘ </p>
<p>å˜é‡:ä¸€ç­‰å…¬æ°‘</p>
<p>å‡½æ•°ç¼–ç¨‹çš„ä¸€ç­‰å…¬æ°‘: å‡½æ•°å¯ä»¥åƒå˜é‡é‚£æ ·è‡ªç”±ä¼ é€’(å½“åšå‚æ•°æˆ–è€…è¿”å›å€¼)</p>
<p>In <a href="https://en.wikipedia.org/wiki/Computer_science" target="_blank" rel="external">computer science</a>, a <a href="https://en.wikipedia.org/wiki/Programming_language" target="_blank" rel="external">programming language</a> is said to have <strong>first-class functions</strong> if it treats <a href="https://en.wikipedia.org/wiki/Function_(programming" target="_blank" rel="external">functions</a>) as <a href="https://en.wikipedia.org/wiki/First-class_citizen" target="_blank" rel="external">first-class citizens</a>. Specifically, this means the language supports passing functions as arguments to other functions, returning them as the values from other functions, and assigning them to variables or storing them in data structures.[<a href="https://en.wikipedia.org/wiki/First-class_function#cite_note-1" target="_blank" rel="external">1</a></p>
<p>RACStream //æŠ½è±¡ç±»</p>
<ul>
<li>RACSignal  </li>
<li>RACSubject // A subject can be thought of as a signal that you can manually control by sending next, completed, and error.</li>
</ul>
</blockquote>
<h4 id="ä¿¡å·çš„ç†è§£"><a href="#ä¿¡å·çš„ç†è§£" class="headerlink" title="ä¿¡å·çš„ç†è§£"></a>ä¿¡å·çš„ç†è§£</h4><p>reactive cocoa ä¸»è¦æ“ä½œçš„æ˜¯ä¿¡å·ã€‚</p>
<blockquote>
<p> <strong>ä¿¡å·</strong>:å¯ä»¥æŠŠä¿¡å·æƒ³è±¡æˆæ°´é¾™å¤´ï¼Œåªä¸è¿‡é‡Œé¢ä¸æ˜¯æ°´ï¼Œè€Œæ˜¯ç»ç’ƒçƒ(value)ï¼Œç›´å¾„è·Ÿæ°´ç®¡çš„å†…å¾„ä¸€æ ·ï¼Œè¿™æ ·å°±èƒ½ä¿è¯ç»ç’ƒçƒæ˜¯ä¾æ¬¡æ’åˆ—ï¼Œä¸ä¼šå‡ºç°å¹¶æ’çš„æƒ…å†µ(æ•°æ®éƒ½æ˜¯çº¿æ€§å¤„ç†çš„ï¼Œä¸ä¼šå‡ºç°å¹¶å‘æƒ…å†µ)ã€‚æ°´é¾™å¤´çš„å¼€å…³é»˜è®¤æ˜¯å…³çš„ï¼Œé™¤éæœ‰äº†æ¥æ”¶æ–¹(subscriber)ï¼Œæ‰ä¼šæ‰“å¼€ã€‚è¿™æ ·åªè¦æœ‰æ–°çš„ç»ç’ƒçƒè¿›æ¥ï¼Œå°±ä¼šè‡ªåŠ¨ä¼ é€ç»™æ¥æ”¶æ–¹ã€‚å¯ä»¥åœ¨æ°´é¾™å¤´ä¸ŠåŠ ä¸€ä¸ªè¿‡æ»¤å˜´(filter)ï¼Œä¸ç¬¦åˆçš„ä¸è®©é€šè¿‡ï¼Œä¹Ÿå¯ä»¥åŠ ä¸€ä¸ªæ”¹åŠ¨è£…ç½®ï¼ŒæŠŠçƒæ”¹å˜æˆç¬¦åˆè‡ªå·±çš„éœ€æ±‚(map)ã€‚ä¹Ÿå¯ä»¥æŠŠå¤šä¸ªæ°´é¾™å¤´åˆå¹¶æˆä¸€ä¸ªæ–°çš„æ°´é¾™å¤´(combineLatest:reduce:)ï¼Œè¿™æ ·åªè¦å…¶ä¸­çš„ä¸€ä¸ªæ°´é¾™å¤´æœ‰ç»ç’ƒçƒå‡ºæ¥ï¼Œè¿™ä¸ªæ–°åˆå¹¶çš„æ°´é¾™å¤´å°±ä¼šå¾—åˆ°è¿™ä¸ªçƒã€‚</p>
</blockquote>
<h4 id="ä¿¡å·çš„åŸºæœ¬æ“ä½œ"><a href="#ä¿¡å·çš„åŸºæœ¬æ“ä½œ" class="headerlink" title="ä¿¡å·çš„åŸºæœ¬æ“ä½œ"></a>ä¿¡å·çš„åŸºæœ¬æ“ä½œ</h4><h5 id="è¿‡æ»¤æ“ä½œ"><a href="#è¿‡æ»¤æ“ä½œ" class="headerlink" title="è¿‡æ»¤æ“ä½œ"></a>è¿‡æ»¤æ“ä½œ</h5><h6 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h6><p>Maps <code>block</code> across the values in the receiver.</p>
<h6 id="Filter"><a href="#Filter" class="headerlink" title="Filter"></a>Filter</h6><p>Filters out values in the receiver that donâ€™t pass the given test.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">   RACSignal *signalP= [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</span><br><span class="line">       </span><br><span class="line">       [subscriber sendNext:@1];</span><br><span class="line">       [subscriber sendNext:@2];</span><br><span class="line">       [subscriber sendCompleted];</span><br><span class="line">       </span><br><span class="line">       return [RACDisposable disposableWithBlock:^&#123;</span><br><span class="line">           NSLog(@&quot;dispose&quot;);</span><br><span class="line">       &#125;];</span><br><span class="line">   &#125;];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   RACSignal *signalN = [signalP map:^id(NSNumber *value) &#123;</span><br><span class="line">       return @([value intValue] +1);</span><br><span class="line">   &#125;];</span><br><span class="line"></span><br><span class="line">RACSignal *signalG = [signalP filter:^BOOL(NSNumber *value) &#123;</span><br><span class="line">      </span><br><span class="line">       return [value intValue] &gt; 1;</span><br><span class="line">   &#125;];</span><br><span class="line">   // output: 2,3</span><br><span class="line">   [signalN subscribeNext:^(id x) &#123;</span><br><span class="line">       NSLog(@&quot;%@&quot;,x);</span><br><span class="line">   &#125;];</span><br><span class="line">// output:2</span><br><span class="line">   [signalG subscribeNext:^(id x) &#123;</span><br><span class="line">       NSLog(@&quot;%@&quot;,x);</span><br><span class="line">   &#125;];</span><br></pre></td></tr></table></figure>
<h6 id="throttle"><a href="#throttle" class="headerlink" title="throttle"></a>throttle</h6><p>æŒ‡å®šæ—¶é—´å†…ï¼Œäº§ç”ŸAä¿¡å·ï¼Œç´§æ¥ç€äº§ç”ŸBä¿¡å·ï¼Œè¿™æ—¶å€™Aä¿¡å·å°±ä¼šè¢«æŠ›å¼ƒï¼Œ</p>
<p>å¦‚æœåœ¨æŒ‡å®šæ—¶é—´å†…ï¼Œå†ä¹Ÿæ²¡æœ‰äº§ç”Ÿæ–°ä¿¡å·ï¼Œåˆ™Bä¿¡å·ä¼šä¸€ç›´ä¿ç•™çŸ¥é“æŒ‡å®šæ—¶é—´åˆ°è¾¾</p>
<p><img src="http://ohbzayk4i.bkt.clouddn.com/17-1-23/23396068-file_1485141818101_8d8f.png" alt=""></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[[[RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber)&#123;</span><br><span class="line">    [subscriber sendNext:@&quot;ğŸ¹1&quot;];</span><br><span class="line">    dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(1 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123;</span><br><span class="line">        [subscriber sendNext:@&quot;ğŸ¹2&quot;];</span><br><span class="line">    &#125;);</span><br><span class="line">    dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(2.5 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123;</span><br><span class="line">        [subscriber sendNext:@&quot;ğŸ¹3&quot;];</span><br><span class="line">        [subscriber sendNext:@&quot;ğŸ¹4&quot;];</span><br><span class="line">        [subscriber sendNext:@&quot;ğŸ¹5&quot;];</span><br><span class="line">    &#125;);</span><br><span class="line">    dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(3 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123;</span><br><span class="line">        [subscriber sendNext:@&quot;ğŸ¹6&quot;];</span><br><span class="line">    &#125;);</span><br><span class="line">    return nil;</span><br><span class="line">&#125;] throttle:10] subscribeNext:^(id x) &#123;</span><br><span class="line">    NSLog(@&quot;%@é€šè¿‡äº†&quot;,x);</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>
<h5 id="distinctUntilChanged"><a href="#distinctUntilChanged" class="headerlink" title="distinctUntilChanged"></a>distinctUntilChanged</h5><p><img src="https://mcxiaoke.gitbooks.io/rxdocs/content/im&gt; ages/operators/distinctUntilChanged.png" alt=""></p>
<p>ä¸å‰é©±å€¼ä¸åŒè¿‡æ»¤æ‰</p>
<h6 id="skip"><a href="#skip" class="headerlink" title="skip"></a>skip</h6><h6 id="take"><a href="#take" class="headerlink" title="take"></a>take</h6><h4 id="å¤šä¸ªä¿¡å·çš„ç»„åˆæ“ä½œ"><a href="#å¤šä¸ªä¿¡å·çš„ç»„åˆæ“ä½œ" class="headerlink" title="å¤šä¸ªä¿¡å·çš„ç»„åˆæ“ä½œ"></a>å¤šä¸ªä¿¡å·çš„ç»„åˆæ“ä½œ</h4><p>å…³æ³¨çš„é—®é¢˜: </p>
<ul>
<li>å—é‚£ä¸ªä¿¡å·ç»ˆæ­¢è€Œç»ˆæ­¢</li>
<li>é”™è¯¯ä¼ é€’</li>
<li>å„ä¸ªä¿¡å·ä½•æ—¶å¼€å§‹è®¢é˜…</li>
</ul>
<h5 id="concat"><a href="#concat" class="headerlink" title="concat"></a>concat</h5><p><img src="http://ohbzayk4i.bkt.clouddn.com/Jietu20170122-191924.jpg" alt=""></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  RACSignal *singalA = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</span><br><span class="line">      [subscriber sendNext:@1];</span><br><span class="line">       [subscriber sendCompleted];</span><br><span class="line">      return nil;</span><br><span class="line">   &#125;];</span><br><span class="line">   RACSignal *singalB= [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</span><br><span class="line">       [subscriber sendNext:@2];</span><br><span class="line">       [subscriber sendCompleted];</span><br><span class="line">       return nil;</span><br><span class="line">   &#125;];</span><br><span class="line">   </span><br><span class="line">   RACSignal *singalC = [singalA concat:singalB];</span><br><span class="line"></span><br><span class="line">// OUTPUT : 1,2,</span><br><span class="line">   [singalC subscribeNext:^(id x) &#123;</span><br><span class="line">       NSLog(@&quot;%@&quot;,x);</span><br><span class="line">   &#125;];</span><br></pre></td></tr></table></figure>
<p>å…³é”®ç‚¹: å¿…é¡»ç­‰å¾…ç¬¬ä¸€ä¸ªä¿¡å·ç»“æŸã€‚</p>
<h5 id="merge"><a href="#merge" class="headerlink" title="merge"></a>merge</h5><p><img src="http://ohbzayk4i.bkt.clouddn.com/Jietu20170123-025345.jpg" alt=""></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">RACSubject *subject1 = [RACSubject subject];</span><br><span class="line">RACSubject *subject2 = [RACSubject subject];</span><br><span class="line">RACSignal *signal =  [RACSignal merge:@[subject1, subject2]];</span><br><span class="line">// OUTPUT : 1,2,3,4</span><br><span class="line">[signal subscribeNext:^(id x) &#123;</span><br><span class="line">    NSLog(@&quot;%@&quot;,x);</span><br><span class="line">&#125;];</span><br><span class="line">[subject1 sendNext:@1];</span><br><span class="line">[subject2 sendNext:@2];</span><br><span class="line">[subject1 sendNext:@3];</span><br><span class="line">[subject2 sendNext:@4];</span><br></pre></td></tr></table></figure>
<p>å…³é”®ç‚¹:å“ªä¸ªå…ˆåˆ°è¾“å‡ºå“ªä¸ª</p>
<h4 id="zip"><a href="#zip" class="headerlink" title="zip"></a>zip</h4><blockquote>
<p>The first value of each stream will be combined, then the second value, and so forth, until at least one of the streams is exhausted. <strong>å®ƒæŒ‰ç…§ä¸¥æ ¼çš„é¡ºåºç»„åˆä¿¡å·ï¼Œåªæœ‰å½“åŸå§‹çš„Observableä¸­çš„æ¯ä¸€ä¸ªéƒ½å‘å°„äº†ä¸€æ¡æ•°æ®æ—¶<code>zip</code>æ‰å‘å°„æ•°æ®,æƒ³è±¡æˆæ‹‰é“¾ï¼Œä¸€ç¯æ‰£ä¸€ç¯</strong></p>
</blockquote>
<p><img src="http://ohbzayk4i.bkt.clouddn.com/Jietu20170123-040639.jpg" alt=""></p>
<h4 id="combineLatest"><a href="#combineLatest" class="headerlink" title="combineLatest"></a>combineLatest</h4><p>ç»„åˆçš„æ•°å€¼æ€»æ˜¯ä¿æŒæœ€æ–°çš„</p>
<blockquote>
<p>å½“åŸå§‹Observablesçš„ä»»ä½•ä¸€ä¸ªå‘å°„äº†ä¸€æ¡æ•°æ®æ—¶ï¼Œ<code>CombineLatest</code>ä½¿ç”¨ä¸€ä¸ªå‡½æ•°ç»“åˆå®ƒä»¬æœ€è¿‘å‘å°„çš„æ•°æ®ï¼Œç„¶åå‘å°„è¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼</p>
</blockquote>
<p><img src="http://ohbzayk4i.bkt.clouddn.com/Snip20170123_1.png" alt=""></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">   </span><br><span class="line">RACSubject *subject1 = [RACSubject subject];</span><br><span class="line">RACSubject *subject2 = [RACSubject subject];</span><br><span class="line">RACSignal *signal =  [RACSignal combineLatest:@[subject1, subject2]];</span><br><span class="line"></span><br><span class="line">// output: ractuple(1,11), ractuple(1,2),ractuple(3,11), ractuple3,4),</span><br><span class="line">[signal subscribeNext:^(id x) &#123;</span><br><span class="line">    NSLog(@&quot;%@&quot;,x);</span><br><span class="line">&#125;];</span><br><span class="line"></span><br><span class="line">[subject1 sendNext:@1];</span><br><span class="line">[subject2 sendNext:@11];</span><br><span class="line">[subject2 sendNext:@2];</span><br><span class="line">[subject1 sendNext:@3];</span><br><span class="line">[subject2 sendNext:@4];</span><br></pre></td></tr></table></figure>
<h4 id="é«˜é˜¶ä¿¡å·çš„æ“ä½œ"><a href="#é«˜é˜¶ä¿¡å·çš„æ“ä½œ" class="headerlink" title="é«˜é˜¶ä¿¡å·çš„æ“ä½œ"></a>é«˜é˜¶ä¿¡å·çš„æ“ä½œ</h4><p><img src="http://ohbzayk4i.bkt.clouddn.com/17-1-23/55592449-file_1485132732496_ef3a.png" alt=""></p>
<p>[1,2,3,[3,4],5] </p>
<p>æ•°ç»„çš„æ•°ç»„: æ•°ç»„é‡Œé¢æ˜¯æ•°ç»„</p>
<p>é«˜é˜¶ä¿¡å·: ä¿¡å·æµé‡Œé¢è¿˜æ˜¯ä¿¡å·ã€‚</p>
<h5 id="é™é˜¶æ“ä½œ"><a href="#é™é˜¶æ“ä½œ" class="headerlink" title="é™é˜¶æ“ä½œ"></a>é™é˜¶æ“ä½œ</h5><h6 id="Switchtolasts"><a href="#Switchtolasts" class="headerlink" title="Switchtolasts"></a>Switchtolasts</h6><blockquote>
<p>å…³é”®ç‚¹:æ–°çš„ä¿¡å·å¼€å§‹è¢«è®¢é˜…æ—¶å€™ï¼Œå‰ä¸€ä¸ªä¿¡å·ä¼šè¢«å–æ¶ˆè®¢é˜…ã€‚</p>
</blockquote>
<p><img src="http://ohbzayk4i.bkt.clouddn.com/17-1-23/77510402-file_1485133672444_3a17.png" alt=""></p>
<h6 id="Flatten"><a href="#Flatten" class="headerlink" title="Flatten"></a>Flatten</h6><blockquote>
<p>å…³é”®ç‚¹: å„ä¸ªä¿¡å·éƒ½ä¼šè¢«é™è§£ï¼Œä¸ä¼šè¢«å–æ¶ˆ</p>
</blockquote>
<p><img src="http://ohbzayk4i.bkt.clouddn.com/17-1-24/53245742-file_1485258981093_15afe.png" alt=""></p>
<h4 id="è®¢é˜…è¿‡ç¨‹ç®€æ"><a href="#è®¢é˜…è¿‡ç¨‹ç®€æ" class="headerlink" title="è®¢é˜…è¿‡ç¨‹ç®€æ"></a>è®¢é˜…è¿‡ç¨‹ç®€æ</h4><h6 id="æ­¥éª¤ä¸€ï¼š-RACSignal-createSignal-æ¥è·å¾—signal"><a href="#æ­¥éª¤ä¸€ï¼š-RACSignal-createSignal-æ¥è·å¾—signal" class="headerlink" title="æ­¥éª¤ä¸€ï¼š[RACSignal createSignal]æ¥è·å¾—signal"></a>æ­¥éª¤ä¸€ï¼š[RACSignal createSignal]æ¥è·å¾—signal</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">RACSignal.mä¸­ï¼š</span><br><span class="line">+ ( RACSignal *)createSignal:( RACDisposable * (^)( id &lt; RACSubscriber &gt; subscriber))didSubscribe &#123;</span><br><span class="line">  return [ RACDynamicSignal   createSignal :didSubscribe];</span><br><span class="line">&#125;</span><br><span class="line">RACDynamicSignal.mä¸­</span><br><span class="line">+ ( RACSignal *)createSignal:( RACDisposable * (^)( id &lt; RACSubscriber &gt; subscriber))didSubscribe &#123;</span><br><span class="line">  RACDynamicSignal *signal = [[ self   alloc ] init ];</span><br><span class="line"> signal-&gt; _didSubscribe = [didSubscribe copy ];</span><br><span class="line">  return [signal setNameWithFormat : @&quot;+createSignal:&quot; ];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>[RACSignal createSignal]ä¼šè°ƒç”¨å­ç±»RACDynamicSignalçš„createSignalæ¥è¿”å›ä¸€ä¸ªsignalï¼Œ</p>
<p>å¹¶åœ¨signalä¸­ä¿å­˜åé¢çš„ didSubscribeè¿™ä¸ªblock</p>
<h6 id="æ­¥éª¤äºŒï¼š-signal-subscribeNext-æ¥è·å¾—subscriberï¼Œç„¶åè¿›è¡Œsubscription"><a href="#æ­¥éª¤äºŒï¼š-signal-subscribeNext-æ¥è·å¾—subscriberï¼Œç„¶åè¿›è¡Œsubscription" class="headerlink" title="æ­¥éª¤äºŒï¼š[signal subscribeNext:]æ¥è·å¾—subscriberï¼Œç„¶åè¿›è¡Œsubscription"></a>æ­¥éª¤äºŒï¼š[signal subscribeNext:]æ¥è·å¾—subscriberï¼Œç„¶åè¿›è¡Œsubscription</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">RACSignal.mä¸­ï¼š</span><br><span class="line">- ( RACDisposable *)subscribeNext:( void (^)( id x))nextBlock &#123;</span><br><span class="line">  RACSubscriber *o = [ RACSubscriber   subscriberWithNext :nextBlock error : NULL   completed : NULL ];</span><br><span class="line">  return [ self  subscribe :o];</span><br><span class="line">&#125;</span><br><span class="line">RACSubscriber.mä¸­ï¼š</span><br><span class="line"></span><br><span class="line">+ ( instancetype )subscriberWithNext:( void (^)( id x))next error:( void (^)( NSError *error))error completed:( void (^)( void ))completed &#123;</span><br><span class="line">  RACSubscriber *subscriber = [[ self   alloc ] init ];</span><br><span class="line"> subscriber-&gt; _next = [next copy ];</span><br><span class="line"> subscriber-&gt; _error = [error copy ];</span><br><span class="line"> subscriber-&gt; _completed = [completed copy ];</span><br><span class="line">  return subscriber;</span><br><span class="line">&#125;</span><br><span class="line">RACDynamicSignal.mä¸­ï¼š</span><br><span class="line">- (RACDisposable *)subscribe:(id&lt;RACSubscriber&gt;)subscriber &#123;</span><br><span class="line">    RACCompoundDisposable *disposable = [RACCompoundDisposable compoundDisposable];</span><br><span class="line">    subscriber = [[RACPassthroughSubscriber alloc] initWithSubscriber:subscriber signal:self disposable:disposable];</span><br><span class="line">    if (self.didSubscribe != NULL) &#123;</span><br><span class="line">        RACDisposable *schedulingDisposable = [RACScheduler.subscriptionScheduler schedule:^&#123;</span><br><span class="line">          	// å…¥å‚</span><br><span class="line">            RACDisposable *innerDisposable = self.didSubscribe(subscriber);</span><br><span class="line">            [disposable addDisposable:innerDisposable];</span><br><span class="line">        &#125;];</span><br><span class="line">        [disposable addDisposable:schedulingDisposable];</span><br><span class="line">    &#125;</span><br><span class="line">    return disposable;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li>[signal subscribeNext]å…ˆä¼šè·å¾—ä¸€ä¸ªsubscriberï¼Œè¿™ä¸ªsubscriberä¸­ä¿å­˜äº†nextBlockã€errorBlockã€completedBlock</li>
<li>ç”±äºsignalå…¶å®æ˜¯RACDynamicSignalç±»å‹çš„ï¼Œè¿™ä¸ª[self subscribe]æ–¹æ³•ä¼šè°ƒç”¨æ­¥éª¤ä¸€ä¸­ä¿å­˜çš„didSubscribeï¼ŒdidSubscribeçš„å‚æ•°å°±æ˜¯1ä¸­çš„subscriber</li>
</ol>
<h6 id="æ­¥éª¤ä¸‰ï¼šè¿›å…¥didSubscribeï¼Œé€šè¿‡-subscriber-sendNext-æ¥æ‰§è¡Œnext-block"><a href="#æ­¥éª¤ä¸‰ï¼šè¿›å…¥didSubscribeï¼Œé€šè¿‡-subscriber-sendNext-æ¥æ‰§è¡Œnext-block" class="headerlink" title="æ­¥éª¤ä¸‰ï¼šè¿›å…¥didSubscribeï¼Œé€šè¿‡[subscriber sendNext:]æ¥æ‰§è¡Œnext block"></a>æ­¥éª¤ä¸‰ï¼šè¿›å…¥didSubscribeï¼Œé€šè¿‡[subscriber sendNext:]æ¥æ‰§è¡Œnext block</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">RACSubscriber.mä¸­ï¼š</span><br><span class="line">- (void)sendNext:(id)value &#123;</span><br><span class="line">    @synchronized (self) &#123;</span><br><span class="line">        void (^nextBlock)(id) = [self.next copy];</span><br><span class="line">        if (nextBlock == nil) return;</span><br><span class="line">        nextBlock(value);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>didsubiscribeblockçš„[subscriber send:@1] çš„å®é™…æ‰§è¡Œè€…å°±æ˜¯ä¸Šä¸€æ­¥çš„é‚£ä¸ªsubscriber</p>
</blockquote>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="atony2099.github.io/2016/05/01/1swift-tips/stringæ¯”è¾ƒ/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="tony2009">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="æ‰˜å°¼çš„å¼€å‘ç¬”è®°">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="æ‰˜å°¼çš„å¼€å‘ç¬”è®°" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/01/1swift-tips/stringæ¯”è¾ƒ/" itemprop="url">
                  String
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-05-01T00:22:12+08:00">
                2016-05
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="å­—ç¬¦ä¸²çš„æ¯”è¾ƒ"><a href="#å­—ç¬¦ä¸²çš„æ¯”è¾ƒ" class="headerlink" title="å­—ç¬¦ä¸²çš„æ¯”è¾ƒ"></a>å­—ç¬¦ä¸²çš„æ¯”è¾ƒ</h4><p>å­—ç¬¦ä¸²/å­—ç¬¦å¯ä»¥ç”¨ç­‰äºæ“ä½œç¬¦(<code>==</code>)å’Œä¸ç­‰äºæ“ä½œç¬¦(<code>!=</code>)ï¼Œè¯¦ç»†æè¿°åœ¨<a href="http://wiki.jikexueyuan.com/project/swift/chapter2/02_Basic_Operators.html#comparison_operators" target="_blank" rel="external">æ¯”è¾ƒè¿ç®—ç¬¦</a>ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">let quotation = &quot;We&apos;re a lot alike, you and I.&quot;</span><br><span class="line">let sameQuotation = &quot;We&apos;re a lot alike, you and I.&quot;</span><br><span class="line">if quotation == sameQuotation &#123;</span><br><span class="line">    print(&quot;These two strings are considered equal&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="atony2099.github.io/2016/05/01/1swift-tips/anyobject/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="tony2009">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="æ‰˜å°¼çš„å¼€å‘ç¬”è®°">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="æ‰˜å°¼çš„å¼€å‘ç¬”è®°" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/01/1swift-tips/anyobject/" itemprop="url">
                  swift protocol
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-05-01T00:22:12+08:00">
                2016-05
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="å¯¹æ¯”"><a href="#å¯¹æ¯”" class="headerlink" title="å¯¹æ¯”"></a>å¯¹æ¯”</h4><p>anyObject:Any å¯ä»¥ä»£è¡¨ structã€classã€func ç­‰ç­‰å‡ ä¹æ‰€æœ‰ç±»å‹</p>
<p>any : classå®ä¾‹</p>
<blockquote>
<p><code>AnyObject</code>æ˜¯<code>Any</code>çš„å­é›†</p>
</blockquote>
<p>swift 2</p>
<blockquote>
<p>é‚£ä¸ºä»€ä¹ˆä¹‹å‰æˆ‘ä»¬åœ¨ Swift 2  é‡Œå¯ä»¥ç”¨ [AnyObject] å£°æ˜æ•°ç»„ï¼Œå¹¶ä¸”åœ¨é‡Œé¢æ”¾ Intã€String ç­‰ struct ç±»å‹å‘¢ï¼Ÿè¿™æ˜¯å› ä¸º Swift 2 ä¸­ï¼Œä¼šé’ˆå¯¹è¿™äº› Intã€String ç­‰ struct è¿›è¡Œä¸€ä¸ª Implicit Bridging Conversionsï¼Œåœ¨ Array é‡Œæ’å…¥ä»–ä»¬æ—¶ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å°†å…¶ bridge åˆ° Objective-C çš„ NSNumberã€NSString ç­‰ç±»å‹ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬å£°æ˜çš„ [AnyObject] é‡Œå¯ä»¥æ”¾ struct çš„åŸå› ã€‚</p>
</blockquote>
<p><a href="https://zhuanlan.zhihu.com/p/22584349" target="_blank" rel="external">é€‚é… Swift 3 çš„ä¸€ç‚¹å°ç»éªŒå’Œå‘</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="atony2099.github.io/2016/05/01/1swift-tips/swift-init/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="tony2009">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="æ‰˜å°¼çš„å¼€å‘ç¬”è®°">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="æ‰˜å°¼çš„å¼€å‘ç¬”è®°" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/01/1swift-tips/swift-init/" itemprop="url">
                  initæ–¹æ³•
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-05-01T00:22:12+08:00">
                2016-05
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="http://wiki.jikexueyuan.com/project/swift/chapter2/14_Initialization.html" target="_blank" rel="external">æ„é€ è¿‡ç¨‹</a></p>
<ul>
<li>init </li>
</ul>
<p>æ„é€ è¿‡ç¨‹: ä½¿ç”¨ç±»ï¼Œç»“æ„ä½“ï¼Œçš„å®ä¾‹ä¹‹å‰çš„å‡†å¤‡è¿‡ç¨‹ï¼Œ</p>
<ol>
<li>è®¾ç½®éoptionalå®ä¾‹å˜é‡è¿˜æ²¡èµ‹å€¼çš„çš„åˆå§‹å€¼ã€‚</li>
<li>å…¶ä»–ä¸€äº›åˆå§‹åŒ–å·¥ä½œ</li>
</ol>
<p>è§„åˆ™: </p>
<ul>
<li>æŒ‡å®šæ„é€ å™¨å¿…é¡»æ€»æ˜¯<em>å‘ä¸Š</em>ä»£ç†</li>
<li>ä¾¿åˆ©æ„é€ å™¨å¿…é¡»æ€»æ˜¯<em>æ¨ªå‘</em>ä»£ç†æŒ‡å®šæ„é€ å™¨è°ƒç”¨çˆ¶äº²æŒ‡å®šæ„é€ å™¨</li>
</ul>
<h4 id="ä¸¤æ®µå¼æ„é€ è¿‡ç¨‹"><a href="#ä¸¤æ®µå¼æ„é€ è¿‡ç¨‹" class="headerlink" title="ä¸¤æ®µå¼æ„é€ è¿‡ç¨‹"></a>ä¸¤æ®µå¼æ„é€ è¿‡ç¨‹</h4><ol>
<li><p>æ¯ä¸ªå­˜å‚¨å±æ€§æŒ‡å®šä¸€ä¸ªåˆå§‹å€¼</p>
</li>
<li><p>è¿›ä¸€æ­¥å®šåˆ¶å­˜å‚¨å±æ€§</p>
<blockquote>
<p>vs object-c: object-cå¸®æˆ‘ä»¬æŒ‡å®šäº†åˆå§‹å€¼(nil æˆ–è€… 0)</p>
</blockquote>
</li>
</ol>
<h4 id="æ„é€ å‡½æ•°çš„é‡è½½-é‡å†™"><a href="#æ„é€ å‡½æ•°çš„é‡è½½-é‡å†™" class="headerlink" title="æ„é€ å‡½æ•°çš„é‡è½½,é‡å†™"></a>æ„é€ å‡½æ•°çš„é‡è½½,é‡å†™</h4><p>é‡è½½: overload: å‚æ•°åˆ—è¡¨: ä¸ä¸€æ ·ï¼Œè¿”å›åˆ—è¡¨ï¼š æ— æ‰€è°“</p>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; ä¸€æ—¦é‡è½½æ„é€ å‡½æ•°  é»˜è®¤çš„æ„é€ å‡½æ•°å°±ä¸èƒ½è®¿é—®</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>é‡å†™ override :å‚æ•°åˆ—è¡¨å’Œè¿”å›ç±»å‹ä¸€è‡´</p>
<h4 id="æ„é€ å™¨çš„ç»§æ‰¿"><a href="#æ„é€ å™¨çš„ç»§æ‰¿" class="headerlink" title="æ„é€ å™¨çš„ç»§æ‰¿:"></a>æ„é€ å™¨çš„ç»§æ‰¿:</h4><p>å­ç±»é»˜è®¤æƒ…å†µä¸‹ä¸ä¼šç»§æ‰¿çˆ¶ç±»çš„æ„é€ å™¨</p>
<p> 1 . å¦‚æœå­ç±»æ²¡æœ‰å®šä¹‰ä»»ä½•æŒ‡å®šæ„é€ å™¨ï¼Œå®ƒå°†è‡ªåŠ¨ç»§æ‰¿çˆ¶ç±»çš„æŒ‡å®šæ„é€ å™¨</p>
<ol>
<li>å¦‚æœä»–å®ç°äº†å¼—é›·æ‰€æœ‰æŒ‡å®šæ„é€ å®ç°ï¼Œä»–ä¹Ÿå°±ç»§æ‰¿æ‰€æœ‰ä¾¿åˆ©æ„é€ å™¨</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import UIKit</span><br><span class="line"></span><br><span class="line">class wheel: UIControl &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>But this code doesnâ€™t:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">class wheel: UIControl &#123;</span><br><span class="line">override init(frame: CGRect) &#123;</span><br><span class="line">    super.init(frame: frame)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>It shows error â€œ<em>required initializer init must be provided in subclass of UIControl</em>â€œ when I override init(frame: CGRect) but not init(coder aDecoder: NSCoder)</p>
<p>Look. According to <a href="https://developer.apple.com/library/ios/documentation/Swift/Conceptual/Swift_Programming_Language/Initialization.html" target="_blank" rel="external">Apple documentations</a> Swift subclasses do not inherit their superclass initializers by default. They are inherited only in certain circumstances, one of which is: If your subclass doesnâ€™t define any designated initializers, it automatically inherits all of its superclass designated initializers. So if youâ€™re not implementing <code>init(frame: CGRect)</code> all super initializers are inherited.</p>
<p>Also UIView adopts NSCoding protocol, which requires an <code>init(coder:)</code> initializer. So if youâ€™re implementing <code>init(frame: CGRect)</code>, your class is no longer inheriting super initializers. So you must implement that one too:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">required</span> <span class="keyword">init</span>?(coder decoder: <span class="type">NSCoder</span>) &#123;</span><br><span class="line">    <span class="keyword">super</span>.<span class="keyword">init</span>?(coder: decoder)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ‰¹é˜…: ä½ è‡ªå·±å®ç°äº†ä¸€ä¸ªæŒ‡å®šæ„é€ å™¨ï¼Œé‚£ä½ å°±ä¸ç»§æ‰¿äº†ä»–çš„æ„é€ å™¨äº†ã€‚</p>
</blockquote>
<h4 id="å¯å¤±è´¥çš„æ„é€ å™¨"><a href="#å¯å¤±è´¥çš„æ„é€ å™¨" class="headerlink" title="å¯å¤±è´¥çš„æ„é€ å™¨"></a>å¯å¤±è´¥çš„æ„é€ å™¨</h4><p>å¦‚æœä¸€ä¸ªç±»ã€ç»“æ„ä½“æˆ–æšä¸¾ç±»å‹çš„å¯¹è±¡ï¼Œåœ¨æ„é€ è¿‡ç¨‹ä¸­æœ‰å¯èƒ½å¤±è´¥ï¼Œåˆ™ä¸ºå…¶å®šä¹‰ä¸€ä¸ªå¯å¤±è´¥æ„é€ å™¨ã€‚è¿™é‡Œæ‰€æŒ‡çš„â€œå¤±è´¥â€æ˜¯æŒ‡ï¼Œå¦‚ç»™æ„é€ å™¨ä¼ å…¥æ— æ•ˆçš„å‚æ•°å€¼ï¼Œæˆ–ç¼ºå°‘æŸç§æ‰€éœ€çš„å¤–éƒ¨èµ„æºï¼Œåˆæˆ–æ˜¯ä¸æ»¡è¶³æŸç§å¿…è¦çš„æ¡ä»¶ç­‰ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> species: <span class="type">String</span></span><br><span class="line">    <span class="keyword">init</span>?(species: <span class="type">String</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> species.isEmpty &#123; <span class="keyword">return</span> <span class="literal">nil</span> &#125;</span><br><span class="line">        <span class="keyword">self</span>.species = species</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="atony2099.github.io/2016/05/01/1swift-tips/as/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="tony2009">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="æ‰˜å°¼çš„å¼€å‘ç¬”è®°">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="æ‰˜å°¼çš„å¼€å‘ç¬”è®°" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/01/1swift-tips/as/" itemprop="url">
                  swift protocol
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-05-01T00:22:12+08:00">
                2016-05
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>as , as!, as?</p>
<p>The as keyword used to do both upcasts and downcasts:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Before Swift 1.2</span></span><br><span class="line"><span class="keyword">var</span> aView: <span class="type">UIView</span> = someView()</span><br><span class="line"><span class="keyword">var</span> object = aView <span class="keyword">as</span> <span class="type">NSObject</span> <span class="comment">// upcast </span></span><br><span class="line"><span class="keyword">var</span> specificView = aView <span class="keyword">as</span> <span class="type">UITableView</span> <span class="comment">// downcast</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">The upcast, going from a derived class to a base class, can be checked at compile time and will never fail.</span><br><span class="line"></span><br><span class="line">However, downcasts can fail since you canâ€™t always be sure about the specific class. If you have a UIView, itâ€™s possible itâ€™s a UITableView or maybe a UIButton. If your downcast goes to the correct type â€“ great! But if you happen to specify the wrong type, youâ€™ll get a runtime error and the app will crash.</span><br><span class="line"></span><br><span class="line">In Swift 1.2, downcasts must be either optional with as? or â€œforced failableâ€ with as!. If youâ€™re sure about the type, then you can force the cast with as! similar to how you would use an implicitly-unwrapped optional:</span><br></pre></td></tr></table></figure>
<p>// After Swift 1.2<br>var aView: UIView = someView()</p>
<p>var tableView = aView as! UITableView<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">The exclamation point makes it absolutely clear that you know what youâ€™re doing and that thereâ€™s a chance things will go terribly wrong if youâ€™ve accidentally mixed up your types!</span><br><span class="line"></span><br><span class="line">As always, as? with optional binding is the safest way to go:</span><br><span class="line"></span><br><span class="line">```swift</span><br><span class="line">// This isn&apos;t new to Swift 1.2, but is still the safest way</span><br><span class="line">var aView: UIView = someView()</span><br><span class="line"></span><br><span class="line">if let tableView = aView as? UITableView &#123;</span><br><span class="line">  // do something with tableView</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>(<a href="http://stackoverflow.com/questions/29637974/whats-the-difference-between-as-as-and-as" target="_blank" rel="external">Whatâ€™s the difference between â€œas?â€, â€œas!â€, and â€œasâ€?</a>)[<a href="http://stackoverflow.com/questions/29637974/whats-the-difference-between-as-as-and-as" target="_blank" rel="external">http://stackoverflow.com/questions/29637974/whats-the-difference-between-as-as-and-as</a>]</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="atony2099.github.io/2016/05/01/1swift-tips/escaping/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="tony2009">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="æ‰˜å°¼çš„å¼€å‘ç¬”è®°">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="æ‰˜å°¼çš„å¼€å‘ç¬”è®°" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/01/1swift-tips/escaping/" itemprop="url">
                  è®¿é—®çº§åˆ«æ§åˆ¶
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-05-01T00:22:12+08:00">
                2016-05
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="1-Escaping-Closure"><a href="#1-Escaping-Closure" class="headerlink" title="1.Escaping Closure"></a>1.Escaping Closure</h4><blockquote>
<p> ä¸€ä¸ªé—­åŒ…ä½œä¸ºä¸€ä¸ªå‚æ•°ä¼ é€’ç»™ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”åœ¨å‡½æ•°returnä¹‹åæ‰è¢«å”¤èµ·æ‰§è¡Œ</p>
</blockquote>
<p><img src="http://ohbzayk4i.bkt.clouddn.com/16-12-24/50262357-file_1482564200621_e595.png" alt=""></p>
<p>ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå¼•èµ·é€ƒé€¸ï¼Ÿ</p>
<blockquote>
<ol>
<li>Asynchronous execution: If you execute the closure asynchronously on a dispatch queue, the queue will hold onto the closure for you. You have no idea <em>when</em> the closure will be executed and thereâ€™s no guarantee it will complete before the function returns.</li>
<li>Storage: Storing the closure to a global variable, property, or any other bit of storage that lives on past the function call means the closure has also escaped</li>
</ol>
</blockquote>
<p>swift3é—­åŒ…é»˜è®¤æ˜¯éé€ƒé€¸ï¼Œé€ƒé€¸é—­åŒ…éœ€è¦åŠ ä¸Š@escapingæ ‡è®°</p>
<p>é»˜è®¤éé€ƒé€¸çš„å¥½å¤„: </p>
<ol>
<li>æœ€æ˜æ˜¾çš„å¥½å¤„å°±æ˜¯ç¼–è¯‘å™¨ä¼˜åŒ–ä½ çš„ä»£ç çš„æ€§èƒ½å’Œèƒ½åŠ›ã€‚å¦‚æœç¼–è¯‘å™¨çŸ¥é“è¿™ä¸ªé—­åŒ…æ˜¯ä¸å¯é€ƒé€¸çš„ï¼Œå®ƒå¯ä»¥å…³æ³¨å†…å­˜ç®¡ç†çš„å…³é”®ç»†èŠ‚ã€‚</li>
<li>å¯ä»¥åœ¨ä¸å¯é€ƒé€¸é—­åŒ…é‡Œæ”¾å¿ƒçš„ä½¿ç”¨selfå…³é”®å­—ï¼Œå› ä¸ºè¿™ä¸ªé—­åŒ…æ€»æ˜¯åœ¨å‡½æ•°returnä¹‹å‰æ‰§è¡Œï¼Œä½ ä¸éœ€è¦å»ä½¿ç”¨ä¸€ä¸ªå¼±å¼•ç”¨å»å¼•ç”¨self.</li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right"></i></a>
  </nav>


          
          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="tony2009" />
          <p class="site-author-name" itemprop="name">tony2009</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
        
          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">72</span>
                <span class="site-state-item-name">æ—¥å¿—</span>
              </a>
            </div>
          

          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">æ ‡ç­¾</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">tony2009</span>
</div>


<div class="powered-by">
  ç”± <a class="theme-link" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨
</div>

<div class="theme-info">
  ä¸»é¢˜ -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>


        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  




	





  





  

  




  
  

  

  

  

  


</body>
</html>
